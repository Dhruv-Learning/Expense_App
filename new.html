<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Express Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
        overflow-x: hidden;
      }

      .dashboard-wrapper {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
        margin-bottom: 30px;
      }

      .container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .container:hover {
        transform: translateY(-5px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
      }

      .insideContainer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #f0f0f0;
      }

      .insideContainer h1 {
        font-size: 2.5rem;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 700;
      }

      #logoutBtn {
        background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
      }

      #logoutBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
      }

      #expenseForm {
        display: grid;
        gap: 20px;
        margin-bottom: 30px;
      }

      #expenseForm input,
      #expenseForm select,
      #expenseForm button {
        padding: 15px 20px;
        border: 2px solid #e0e6ed;
        border-radius: 12px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: white;
      }

      #expenseForm input:focus,
      #expenseForm select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-1px);
      }

      #expenseForm button {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        border: none;
        cursor: pointer;
        font-weight: 600;
        font-size: 16px;
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
      }

      #expenseForm button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      }

      #expenseList {
        list-style: none;
        max-height: 300px;
        overflow-y: auto;
      }

      #expenseList::-webkit-scrollbar {
        width: 8px;
      }

      #expenseList::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
      }

      #expenseList::-webkit-scrollbar-thumb {
        background: #667eea;
        border-radius: 10px;
      }

      .chart-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .chart-container:hover {
        transform: translateY(-5px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
      }

      .chart-container h2 {
        font-size: 2rem;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 700;
        margin-bottom: 20px;
      }

      #expenseChart {
        width: 100% !important;
        max-height: 350px;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        margin: 15px;
      }

      .card:hover {
        transform: translateY(-3px);
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.15);
      }

      .mainCard{
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .summary-card,
      .budget-card {
        display: inline-block;
        width: calc(50% - 30px);
        vertical-align: top;
      }

      .card h2 {
        font-size: 1.5rem;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 700;
        margin-bottom: 20px;
      }

      .card p {
        font-size: 16px;
        margin: 10px 0;
        color: #555;
      }

      .card b {
        color: #333;
        font-weight: 600;
      }

      #budgetInput {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e0e6ed;
        border-radius: 10px;
        font-size: 16px;
        margin-bottom: 15px;
        transition: all 0.3s ease;
        background: white;
      }

      #budgetInput:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      #setBudgetBtn {
        width: 100%;
        background: linear-gradient(45deg, #4ecdc4, #44a08d);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        font-size: 16px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3);
      }

      #setBudgetBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
      }

      #budgetStatus {
        margin-top: 15px;
        padding: 10px;
        border-radius: 8px;
        font-weight: 500;
      }

      /* Responsive Design */

      @media (max-width: 1024px) {
        .dashboard-wrapper {
          grid-template-columns: 1fr;
          max-width: 95%;
        }
      }
      @media (max-width: 768px) {
        .dashboard-wrapper {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .summary-card,
        .budget-card {
          width: calc(100% - 30px);
          display: block;
          margin: 15px auto;
        }

        .insideContainer h1 {
          font-size: 2rem;
        }

        .chart-container h2 {
          font-size: 1.5rem;
        }
      }

      /* Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .container,
      .chart-container,
      .card {
        animation: fadeInUp 0.6s ease-out;
      }

      /* Expense list items styling (for when items are added dynamically) */
      #expenseList li {
        background: linear-gradient(45deg, #f8f9fa, #ffffff);
        margin: 10px 0;
        padding: 15px;
        border-radius: 12px;
        border-left: 4px solid #667eea;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
      }

      #expenseList li:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="dashboard-wrapper">
      <!-- Left side -->
      <div class="container">
        <div class="insideContainer">
          <h1>üìä Dashboard</h1>
          <button id="logoutBtn">Logout</button>
        </div>

        <form id="expenseForm">
          <input
            type="text"
            id="title"
            placeholder="Enter the expense title"
            required
          />
          <input
            type="number"
            id="amount"
            placeholder="Enter amount expended"
            required
          />
          <select id="category">
            <option value="Food">üçî Food</option>
            <option value="Transport">üöå Transport</option>
            <option value="Shopping">üõç Shopping</option>
            <option value="Education">üñã Education</option>
            <option value="Home">üè† Home</option>
            <option value="Other">üéÅ Others</option>
          </select>
          <button type="submit">Add Expense</button>
        </form>

        <ul id="expenseList"></ul>
      </div>

      <!-- Right chart side -->
      <div class="chart-container">
        <h2>üìà Expense Chart</h2>
        <canvas id="expenseChart" width="400" height="400"></canvas>
      </div>
    </div>
    
    <div class="mainCard">
    <!-- Summary Card -->
    <div class="card summary-card">
      <h2>üíπ Summary</h2>
      <p><b>Total Income:</b> ‚Çπ<span id="totalIncome">0</span></p>
      <p><b>Total Expense:</b> ‚Çπ<span id="totalExpense">0</span></p>
      <p><b>Balance:</b> ‚Çπ<span id="balance">0</span></p>
    </div>

    <!-- Budget Card -->
    <div class="card budget-card">
      <h2>üìä Monthly Budget</h2>
      <input type="number" id="budgetInput" placeholder="Set your budget (‚Çπ)" />
      <button id="setBudgetBtn">Set Budget</button>
      <p id="budgetStatus"></p>
    </div>

    </div>

    <script>
      // Enhanced Storage Functions
      function saveExpense(expenses) {
        localStorage.setItem("expenses", JSON.stringify(expenses));
      }

      function getExpense() {
        return JSON.parse(localStorage.getItem("expenses")) || [];
      }

      // Enhanced Dashboard with UI animations and feedback
      const form = document.getElementById("expenseForm");
      const list = document.getElementById("expenseList");
      const titleInput = document.getElementById("title");
      const amountInput = document.getElementById("amount");
      const categoryInput = document.getElementById("category");
      const container = document.querySelector(".insideContainer");
      const ctx = document.getElementById("expenseChart").getContext("2d");

      // Chart.js chart with enhanced styling
      let chart;

      // Get stored expenses from localStorage
      let expenses = getExpense() || [];

      // Initial render
      renderExpenses(expenses);
      renderChart(expenses);

      // Enhanced form submission with animations
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const title = titleInput.value.trim();
        const amount = parseFloat(amountInput.value);
        const type = categoryInput.value;
        const date = new Date();

        if (!title || isNaN(amount)) {
          showNotification("Please enter valid title and amount.", "error");
          return;
        }

        const expense = {
          id: Date.now(),
          title,
          amount,
          type,
          date: date.toISOString(),
        };

        expenses.push(expense);
        saveExpense(expenses);

        // Add success animation
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.style.transform = "scale(0.95)";
        setTimeout(() => {
          submitBtn.style.transform = "scale(1)";
        }, 150);

        renderExpenses(expenses);
        renderChart(expenses);
        form.reset();

        showNotification(`Added ‚Çπ${amount} expense for ${type}!`, "success");
      });

      // Enhanced expense deletion with confirmation
      list.addEventListener("click", function (e) {
        if (e.target.classList.contains("delete-btn")) {
          const id = parseInt(e.target.dataset.id);
          const expenseToDelete = expenses.find((exp) => exp.id === id);

          if (
            confirm(
              `Delete "${expenseToDelete.title}" expense of ‚Çπ${expenseToDelete.amount}?`
            )
          ) {
            expenses = expenses.filter((exp) => exp.id !== id);
            saveExpense(expenses);

            // Add fade out animation
            const listItem = e.target.parentElement;
            listItem.style.transition = "all 0.3s ease";
            listItem.style.opacity = "0";
            listItem.style.transform = "translateX(-20px)";

            setTimeout(() => {
              renderExpenses(expenses);
              renderChart(expenses);
            }, 300);

            showNotification("Expense deleted successfully!", "success");
          }
        }
      });

      // Enhanced expense list rendering
      function renderExpenses(data) {
        list.innerHTML = "";

        if (data.length === 0) {
          list.innerHTML = `<li style="text-align: center; color: #888; padding: 40px; background: linear-gradient(45deg, #f8f9fa, #ffffff); border-radius: 12px; border: 2px dashed #ddd;">
                    <div style="font-size: 48px; margin-bottom: 10px;">üìù</div>
                    <div style="font-size: 18px; font-weight: 500;">No expenses yet</div>
                    <div style="font-size: 14px; color: #aaa; margin-top: 5px;">Add your first expense above!</div>
                </li>`;
          return;
        }

        data.forEach((exp, index) => {
          const li = document.createElement("li");
          const formattedDate = new Date(exp.date).toLocaleDateString();
          const categoryIcon = getCategoryIcon(exp.type);

          li.style.animationDelay = `${index * 0.1}s`;
          li.className = "expense-item";

          li.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                <span style="font-size: 20px; margin-right: 10px;">${categoryIcon}</span>
                                <strong style="color: #333; font-size: 16px;">${
                                  exp.title
                                }</strong>
                            </div>
                            <div style="color: #666; font-size: 14px;">
                                ${exp.type} ‚Ä¢ ${formattedDate}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 18px; font-weight: 600; color: #ff6b6b; margin-bottom: 5px;">
                                -‚Çπ${exp.amount.toFixed(2)}
                            </div>
                            <button class="delete-btn" data-id="${exp.id}" 
                                style="background: #ff6b6b; color: white; border: none; border-radius: 50%; 
                                       width: 30px; height: 30px; cursor: pointer; font-size: 12px;
                                       transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;">
                                ‚ùå
                            </button>
                        </div>
                    </div>
                `;
          list.appendChild(li);

          // Add hover effect to delete button
          const deleteBtn = li.querySelector(".delete-btn");
          deleteBtn.addEventListener("mouseenter", () => {
            deleteBtn.style.transform = "scale(1.1)";
            deleteBtn.style.boxShadow = "0 4px 15px rgba(255, 107, 107, 0.4)";
          });
          deleteBtn.addEventListener("mouseleave", () => {
            deleteBtn.style.transform = "scale(1)";
            deleteBtn.style.boxShadow = "none";
          });
        });
      }

      // Get category icon
      function getCategoryIcon(category) {
        const icons = {
          Food: "üçî",
          Transport: "üöå",
          Shopping: "üõç",
          Education: "üñã",
          Home: "üè†",
          Other: "üéÅ",
        };
        return icons[category] || "üí∞";
      }

      // Enhanced chart with better colors and animations
      function renderChart(data) {
        const categoryTotals = {};

        data.forEach((exp) => {
          categoryTotals[exp.type] =
            (categoryTotals[exp.type] || 0) + exp.amount;
        });

        const labels = Object.keys(categoryTotals);
        const values = Object.values(categoryTotals);

        if (chart) chart.destroy();

        chart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: labels,
            datasets: [
              {
                label: "Expenses by Category",
                data: values,
                backgroundColor: [
                  "#ff6b6b",
                  "#4ecdc4",
                  "#45b7d1",
                  "#96ceb4",
                  "#feca57",
                  "#ff9ff3",
                ],
                borderWidth: 3,
                borderColor: "#fff",
                hoverBorderWidth: 5,
                hoverOffset: 10,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  padding: 20,
                  font: { size: 14, weight: "500" },
                  color: "#333",
                  usePointStyle: true,
                  pointStyle: "circle",
                },
              },
              tooltip: {
                backgroundColor: "rgba(0,0,0,0.8)",
                titleColor: "#fff",
                bodyColor: "#fff",
                cornerRadius: 10,
                displayColors: false,
                callbacks: {
                  label: function (context) {
                    const total = context.dataset.data.reduce(
                      (a, b) => a + b,
                      0
                    );
                    const percentage = ((context.raw / total) * 100).toFixed(1);
                    return `${context.label}: ‚Çπ${context.raw.toFixed(
                      2
                    )} (${percentage}%)`;
                  },
                },
              },
            },
            animation: {
              animateScale: true,
              animateRotate: true,
              duration: 1000,
            },
          },
        });
      }

      // Enhanced filter with better styling
      const filterSelect = document.createElement("select");
      filterSelect.innerHTML = `
            <option value="all">All Time</option>
            <option value="monthly">This Month</option>
            <option value="weekly">This Week</option>
        `;
      filterSelect.style.cssText = `
            margin-left: 1rem; 
            padding: 8px 15px; 
            border: 2px solid #e0e6ed; 
            border-radius: 10px; 
            background: white; 
            font-size: 14px; 
            cursor: pointer;
            transition: all 0.3s ease;
        `;
      container.appendChild(filterSelect);

      filterSelect.addEventListener("focus", () => {
        filterSelect.style.borderColor = "#667eea";
        filterSelect.style.boxShadow = "0 0 0 3px rgba(102, 126, 234, 0.1)";
      });

      filterSelect.addEventListener("blur", () => {
        filterSelect.style.borderColor = "#e0e6ed";
        filterSelect.style.boxShadow = "none";
      });

      filterSelect.addEventListener("change", () => {
        const filtered = filterExpenses(expenses, filterSelect.value);
        renderExpenses(filtered);
        renderChart(filtered);
        showNotification(
          `Filtered by: ${
            filterSelect.options[filterSelect.selectedIndex].text
          }`,
          "info"
        );
      });

      function filterExpenses(data, filter) {
        const now = new Date();

        if (filter === "monthly") {
          return data.filter((exp) => {
            const date = new Date(exp.date);
            return (
              date.getMonth() === now.getMonth() &&
              date.getFullYear() === now.getFullYear()
            );
          });
        }

        if (filter === "weekly") {
          const oneWeekAgo = new Date();
          oneWeekAgo.setDate(now.getDate() - 7);
          return data.filter((exp) => new Date(exp.date) >= oneWeekAgo);
        }

        return data;
      }

      // Enhanced summary and budget functionality
      const totalIncomeEl = document.getElementById("totalIncome");
      const totalExpenseEl = document.getElementById("totalExpense");
      const balanceEl = document.getElementById("balance");
      const budgetInput = document.getElementById("budgetInput");
      const setBudgetBtn = document.getElementById("setBudgetBtn");
      const budgetStatus = document.getElementById("budgetStatus");

      let totalIncome = parseFloat(localStorage.getItem("income")) || 0;
      let budget = parseFloat(localStorage.getItem("budget")) || 0;

      function updateSummary() {
        const totalExpense = expenses.reduce((sum, exp) => sum + exp.amount, 0);
        const balance = totalIncome - totalExpense;

        // Animate number changes
        animateValue(totalIncomeEl, 0, totalIncome, 1000);
        animateValue(totalExpenseEl, 0, totalExpense, 1000);
        animateValue(balanceEl, 0, balance, 1000);

        // Update balance color based on value
        balanceEl.parentElement.style.color =
          balance >= 0 ? "#4ecdc4" : "#ff6b6b";

        // Enhanced budget status with better styling
        if (budget > 0) {
          const remaining = budget - totalExpense;
          const percentage = (totalExpense / budget) * 100;

          if (totalExpense >= budget) {
            budgetStatus.innerHTML = `
                        <div style="padding: 15px; background: linear-gradient(45deg, #ff6b6b20, #ff6b6b10); 
                                    border-radius: 10px; border-left: 4px solid #ff6b6b;">
                            ‚ö†Ô∏è <strong>Budget Exceeded!</strong><br>
                            <span style="font-size: 14px;">Over by ‚Çπ${Math.abs(
                              remaining
                            ).toFixed(2)}</span>
                        </div>
                    `;
          } else if (percentage >= 80) {
            budgetStatus.innerHTML = `
                        <div style="padding: 15px; background: linear-gradient(45deg, #feca5720, #feca5710); 
                                    border-radius: 10px; border-left: 4px solid #feca57;">
                            ‚ö†Ô∏è <strong>Budget Warning!</strong><br>
                            <span style="font-size: 14px;">‚Çπ${remaining.toFixed(
                              2
                            )} remaining (${(100 - percentage).toFixed(
              1
            )}%)</span>
                        </div>
                    `;
          } else {
            budgetStatus.innerHTML = `
                        <div style="padding: 15px; background: linear-gradient(45deg, #4ecdc420, #4ecdc410); 
                                    border-radius: 10px; border-left: 4px solid #4ecdc4;">
                            ‚úÖ <strong>Within Budget!</strong><br>
                            <span style="font-size: 14px;">‚Çπ${remaining.toFixed(
                              2
                            )} remaining (${(100 - percentage).toFixed(
              1
            )}%)</span>
                        </div>
                    `;
          }
        } else {
          budgetStatus.innerHTML = `
                    <div style="padding: 15px; background: linear-gradient(45deg, #66666620, #66666610); 
                                border-radius: 10px; border-left: 4px solid #666;">
                        üí° <strong>Set Your Budget</strong><br>
                        <span style="font-size: 14px;">Track your spending goals!</span>
                    </div>
                `;
        }
      }

      // Animate number values
      function animateValue(element, start, end, duration) {
        const startTimestamp = performance.now();
        const step = (timestamp) => {
          const elapsed = timestamp - startTimestamp;
          const progress = Math.min(elapsed / duration, 1);
          const current = start + (end - start) * progress;
          element.textContent = current.toFixed(2);
          if (progress < 1) {
            requestAnimationFrame(step);
          }
        };
        requestAnimationFrame(step);
      }

      setBudgetBtn.addEventListener("click", () => {
        budget = parseFloat(budgetInput.value);
        if (!isNaN(budget) && budget > 0) {
          localStorage.setItem("budget", budget);
          budgetInput.value = "";
          updateSummary();
          showNotification(`Budget set to ‚Çπ${budget.toFixed(2)}!`, "success");
        } else {
          showNotification("Enter a valid budget amount!", "error");
        }
      });

      // Enhanced render function
      const originalRenderExpenses = renderExpenses;
      renderExpenses = function (data) {
        originalRenderExpenses(data);
        updateSummary();
      };

      // Notification system
      function showNotification(message, type = "info") {
        const notification = document.createElement("div");
        notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                border-radius: 10px;
                color: white;
                font-weight: 500;
                z-index: 1000;
                transform: translateX(100%);
                transition: all 0.3s ease;
                max-width: 300px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            `;

        const colors = {
          success: "#4ecdc4",
          error: "#ff6b6b",
          info: "#45b7d1",
        };

        notification.style.background = `linear-gradient(45deg, ${colors[type]}, ${colors[type]}dd)`;
        notification.textContent = message;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.transform = "translateX(0)";
        }, 100);

        setTimeout(() => {
          notification.style.transform = "translateX(100%)";
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 3000);
      }

      // Initialize everything
      updateSummary();

      // Add income functionality (you can call this when needed)
      function addIncome(amount) {
        totalIncome += amount;
        localStorage.setItem("income", totalIncome);
        updateSummary();
        showNotification(`Added ‚Çπ${amount} income!`, "success");
      }

      // Example usage: addIncome(5000);
    </script>
  </body>
</html>
